{"openapi":"3.0.1","info":{"title":"OpenAPI definition","version":"v0"},"servers":[{"url":"http://localhost:8080","description":"Generated server url"}],"tags":[{"name":"Concert","description":"콘서트 API"},{"name":"Payment","description":"결제 API"},{"name":"Reservation","description":"좌석예약 API"},{"name":"User","description":"사용자 API"},{"name":"Waiting","description":"대기열 API"}],"paths":{"/waiting":{"post":{"tags":["Waiting"],"summary":"사용자 토큰 발급 기능","description":"사용자의 대기열토큰을 발급합니다.","operationId":"requestToken","responses":{"200":{"description":"토큰반환","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CreatedResult"}}}}}},"patch":{"tags":["Waiting"],"summary":"사용자 토큰 조회 기능","description":"사용자의 대기열토큰을 상태 및 순번을 조회합니다.","operationId":"getTokenWithWaitingNo","parameters":[{"name":"Hh-Waiting-Token","in":"header","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"토큰반환","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TokenResult"}}}}}}},"/reservation":{"post":{"tags":["Reservation"],"summary":"좌석 예약 요청","description":"한 좌석에 예약을 요청합니다.","operationId":"createReservation","parameters":[{"name":"Hh-Waiting-Token","in":"header","description":"토큰","required":true,"schema":{"type":"string","description":"토큰"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Seat"}}},"required":true},"responses":{"200":{"description":"예약성공","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Reserved"}}}}}}},"/payment":{"post":{"tags":["Payment"],"summary":"예약내역 결제 요청","description":"예약내역에 관한 결제를 요청합니다.","operationId":"payToReservation","parameters":[{"name":"Hh-Waiting-Token","in":"header","description":"토큰","required":true,"schema":{"type":"string","description":"토큰"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreatePayment"}}},"required":true},"responses":{"200":{"description":"결제성공","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Payed"}}}}}}},"/user/charge":{"patch":{"tags":["User"],"summary":"사용자 포인트 잔액 충전","description":"사용자의 포인트 잔액을 충전합니다.","operationId":"chargeUserPoint","parameters":[{"name":"Hh-Waiting-Token","in":"header","description":"토큰","required":true,"schema":{"type":"string","description":"토큰"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChargePoint"}}},"required":true},"responses":{"200":{"description":"충전성공","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PointResult"}}}}}}},"/user/{userId}/point":{"get":{"tags":["User"],"summary":"사용자 포인트 잔액 조회","description":"사용자의 포인트 잔액을 조회합니다.","operationId":"point","parameters":[{"name":"Hh-Waiting-Token","in":"header","description":"토큰","required":true,"schema":{"type":"string","description":"토큰"}},{"name":"userId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"조회성공","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PointResult"}}}}}}},"/concerts":{"get":{"tags":["Concert"],"summary":"예약가능 날짜 조회","description":"예약가능한 공연날짜 리스트를 조회합니다.","operationId":"availableConcerts","parameters":[{"name":"Hh-Waiting-Token","in":"header","description":"토큰","required":true,"schema":{"type":"string","description":"토큰"}},{"name":"from","in":"query","description":"검색날짜범위1","required":false,"schema":{"type":"string","description":"검색날짜범위1"}},{"name":"end","in":"query","description":"검색날짜범위2","required":false,"schema":{"type":"string","description":"검색날짜범위2"}}],"responses":{"200":{"description":"조회성공","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ConcertList"}}}}}}},"/concerts/{concertId}":{"get":{"tags":["Concert"],"summary":"예약가능 좌석 조회","description":"공연정보로 공연좌석 리스트를 조회합니다.","operationId":"availableSeats","parameters":[{"name":"Hh-Waiting-Token","in":"header","description":"토큰","required":true,"schema":{"type":"string","description":"토큰"}},{"name":"concertId","in":"path","description":"공연id","required":true,"schema":{"type":"string","description":"공연id"}}],"responses":{"200":{"description":"조회성공","content":{"*/*":{"schema":{"$ref":"#/components/schemas/SeatList"}}}}}}}},"components":{"schemas":{"CreatedResult":{"type":"object","properties":{"token":{"type":"string"},"status":{"type":"string"},"createdAt":{"type":"string","format":"date-time"}}},"Seat":{"type":"object","properties":{"seatId":{"type":"integer","description":"좌석id","format":"int64"},"userId":{"type":"integer","description":"사용자id","format":"int64"}}},"Reserved":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"seatId":{"type":"integer","format":"int64"},"price":{"type":"integer","format":"int64"},"status":{"type":"string"},"reservedAt":{"type":"string","format":"date-time"}}},"CreatePayment":{"type":"object","properties":{"reservationId":{"type":"integer","description":"예약id","format":"int64"}}},"CommonPayInfo":{"type":"object","properties":{"payId":{"type":"integer","format":"int64"},"payStatus":{"type":"string"},"payedAt":{"type":"string","format":"date-time"}}},"Payed":{"type":"object","properties":{"reservation":{"$ref":"#/components/schemas/ReservedInfo"},"payment":{"$ref":"#/components/schemas/CommonPayInfo"}}},"ReservedInfo":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"userId":{"type":"integer","format":"int64"},"seatId":{"type":"integer","format":"int64"},"price":{"type":"integer","format":"int64"},"status":{"type":"string"},"reservedAt":{"type":"string","format":"date-time"},"expiresAt":{"type":"string","format":"date-time"}}},"TokenResult":{"type":"object","properties":{"token":{"type":"string"},"status":{"type":"string"},"waitingNo":{"type":"integer","format":"int64"},"updatedAt":{"type":"string","format":"date-time"}}},"ChargePoint":{"type":"object","properties":{"userId":{"type":"integer","description":"사용자 id","format":"int64"},"amount":{"type":"integer","description":"충전금액","format":"int64"}}},"PointResult":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"point":{"type":"integer","format":"int64"}}},"CommonConcert":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"title":{"type":"string"},"concertDate":{"type":"string","format":"date"},"startTime":{"$ref":"#/components/schemas/LocalTime"}}},"ConcertList":{"type":"object","properties":{"results":{"type":"array","items":{"$ref":"#/components/schemas/CommonConcert"}}}},"LocalTime":{"type":"object","properties":{"hour":{"type":"integer","format":"int32"},"minute":{"type":"integer","format":"int32"},"second":{"type":"integer","format":"int32"},"nano":{"type":"integer","format":"int32"}}},"SeatList":{"type":"object","properties":{"seats":{"type":"array","items":{"$ref":"#/components/schemas/SeatResult"}}}},"SeatResult":{"type":"object","properties":{"seatNo":{"type":"integer","format":"int32"},"price":{"type":"integer","format":"int64"},"occupied":{"type":"boolean"}}}}}}
